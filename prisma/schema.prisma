// This is your Prisma schema file for the Minute Cryptic gift project
// Simplified SQLite database for 10-25 users

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id           String     @id @default(cuid())
  email        String     @unique
  passwordHash String
  name         String?
  role         String     @default("USER")
  createdAt    DateTime   @default(now())
  solutions    Solution[]
}

model Puzzle {
  id          String     @id @default(cuid())
  clue        String
  answer      String
  explanation String?
  difficulty  Int        @default(1)
  publishDate DateTime   @unique
  isActive    Boolean    @default(true)
  createdAt   DateTime   @default(now())
  solutions   Solution[]
}

model Solution {
  id         String   @id @default(cuid())
  userId     String
  puzzleId   String
  userAnswer String
  isCorrect  Boolean
  timeSpent  Int      // seconds
  solvedAt   DateTime @default(now())
  user       User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  puzzle     Puzzle   @relation(fields: [puzzleId], references: [id], onDelete: Cascade)

  @@unique([userId, puzzleId])
}
